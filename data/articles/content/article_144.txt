Breaking changes edit Deprecations edit New features edit Enhancements edit Bug fixes edit Aggregations Setting bucket on empty aggregation #17264 (issue: #16546 ) Set meta data for pipeline aggregations #16516 (issue: #16484 ) Filter(s) aggregation should create weights only once. #15998 Make missing on terms aggs work with all execution modes. #15746 (issue: #14882 ) Fix NPE in Derivative Pipeline when current bucket value is null #14745 Check lenient_expand_open after aliases have been resolved #15882 (issue: #13278 ) Allocation IndicesStore checks for allocated elsewhere for every shard not alocated on the local node #17106 Prevent peer recovery from node with older version #15775 fixed propagation of autoGeneratedId on document creation #16767 Throw exception if content type could not be determined in Update API #15904 (issue: #15822 ) Highlighting Log uncaught exceptions from scheduled once tasks #15824 (issue: #15814 ) FunctionScoreQuery should implement two-phase iteration. #15602 Add missing index name to indexing slow log #17026 (issue: #17025 ) ParseFieldMatcher should log when using deprecated settings. #16988 Put mapping operations must update metadata of all types. #16264 (issue: #16239 ) Fix serialization of search_analyzer . #16255 Reuse metadata mappers for dynamic updates. #16023 (issue: #15997 ) Fix MapperService#searchFilter(...) #15923 (issue: #15757 ) MapperService: check index.mapper.dynamic during index creation #15424 (issue: #15381 ) Parent/Child Check that parent_type in Has Parent Query has child types #16923 (issue: #16692 ) Percolator Plugin Cloud Azure Plugin Discovery GCE Try to renew sync ID if flush=true on forceMerge #17108 (issue: #17019 ) sync translog to disk after recovery from primary #15832 Reindex API Properly register reindex status #17125 Be much much much careful about context #17122 Make search failure cause rest failure #16889 (issue: #16037 ) Check that _value is used in aggregations script before setting value to specialValue #17091 (issue: #14262 ) Add permission to access sun.reflect.MethodAccessorImpl from Groovy scripts #16540 (issue: #16536 ) Fixes json generation for scriptsort w/ deprecated params #16261 (issue: #16260 ) Do not apply minimum_should_match on auto generated boolean query if the coordination factor is disabled. #16155 Do not apply minimum-should-match on a boolean query if the coords are disabled #16078 (issue: #15858 ) Fix blended terms take 2 #15894 (issue: #15860 ) Snapshot/Restore Task Manager Fix TaskId#isSet to return true when id is set and not other way around #17307 Don't wait for completion of list tasks tasks when wait_for_completion flag is set #17231 Call ensureOpen on Translog#newView() to prevent IllegalStateException #17191 Make sure IndexShard is active during recovery so it gets its fair share of the indexing buffer #16209 (issue: #16206 ) Avoid circular reference in exception #15952 (issue: #15941 ) Initialize translog before scheduling the sync to disk #15881 Catch tragic even inside the checkpoint method rather than on the caller side #15825 Never delete translog-N.tlog file when creation fails #15788 Close recovered translog readers if createWriter fails #15762 (issue: #15754 ) Passthrough environment and network settings to tribe client nodes #16893 Tribe node: pass path.conf to inner tribe clients #16258 (issue: #16253 ) Regressions edit